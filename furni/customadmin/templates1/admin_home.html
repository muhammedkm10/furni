{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="{% static 'css/admin_home.css'%}" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


	<title>AdminHub</title>
</head>

<body>
	<style>
	.text-center {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 10px; /* Adjust the padding as needed */
	}
	
	.date-container {
		margin-left: auto; /* Moves the date to the right */
	}

	.date-fields {
    display: flex;
    justify-content: center;
    margin-top: 20px;
}

/* Styling for individual date field */
.date-field {
    margin: 0 10px;
}

/* Style for the labels of date fields (optional) */
.date-field label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #333; /* Change the color as needed */
}

/* Style for the input fields (optional) */
.date-field input[type="date"] {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 5px;
    width: 180px; 
}	
li select {
	padding: 8px;
	font-size: 14px;
}

/* Style the default option (placeholder) */
li select option[disabled] {
	color: #999;
}

/* Style the selected option */
li select option:checked {
	background-color: #4CAF50;
	color: white;
}

/* Style the dropdown options */
li select option {
	padding: 8px;
}

</style>

	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="/adminhome/" class="brand">
			<i class='bx bxs-smile'></i>
			<span class="text">Furni Admin Home </span>
		</a>
		<ul class="side-menu top">
			<li class="active">
				<a href="/adminhome/">
					<span class="text">Dashboard</span>
				</a>
			</li>
			<li>
				<a href="/usermanage/">
					<span class="text">My Users</span>
				</a>
			</li>
			<li>
				<a href="/adminproductmanage/">
					<span class="text">Products</span>
				</a>
			</li>
			<li>
				<a href="/category/">
					<span class="text">Categories</span>
				</a>
			</li>
			<li>
				<a href="/ordersmanage/">
					<span class="text">Orders</span>
				</a>
			</li>
			<li>
				<a href="/coupenmanage/">
					<span class="text">coupen management</span>
				</a>
			</li>
			
			<li>
				<select onchange="if (this.value) window.location.href=this.value;">
					<option value="" disabled selected>Offer Management</option>
					<option value="/productoffer/">
						<span class="text">Add Product Offer</span>
					</option>
					<option value="/viewproductoffer/">
						<span class="text">view Product Offer</span>
					</option>
					<option value="/categoryoffer/">
						<span class="text">Add Category Offer</span>
					</option>
					<option value="/viewcategoryoffer/">
						<span class="text">view Category Offer</span>
					</option>
				</select>
			</li>
		</ul>
		<ul class="side-menu">
			<li> <a href="#logout" class="logout" data-toggle="modal" data-toggle="tooltip">
					<i class='bx bxs-log-out-circle'></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->
	<script>



		// side bar
		const allSideMenu = document.querySelectorAll('#sidebar .side-menu.top li a');

		allSideMenu.forEach(item => {
			const li = item.parentElement;

			item.addEventListener('click', function () {
				allSideMenu.forEach(i => {
					i.parentElement.classList.remove('active');
				})
				li.classList.add('active');
			})
		});




		// TOGGLE SIDEBAR
		const menuBar = document.querySelector('#content nav .bx.bx-menu');
		const sidebar = document.getElementById('sidebar');

		menuBar.addEventListener('click', function () {
			sidebar.classList.toggle('hide');
		})







		const searchButton = document.querySelector('#content nav form .form-input button');
		const searchButtonIcon = document.querySelector('#content nav form .form-input button .bx');
		const searchForm = document.querySelector('#content nav form');

		searchButton.addEventListener('click', function (e) {
			if (window.innerWidth < 576) {
				e.preventDefault();
				searchForm.classList.toggle('show');
				if (searchForm.classList.contains('show')) {
					searchButtonIcon.classList.replace('bx-search', 'bx-x');
				} else {
					searchButtonIcon.classList.replace('bx-x', 'bx-search');
				}
			}
		})





		if (window.innerWidth < 768) {
			sidebar.classList.add('hide');
		} else if (window.innerWidth > 576) {
			searchButtonIcon.classList.replace('bx-x', 'bx-search');
			searchForm.classList.remove('show');
		}


		window.addEventListener('resize', function () {
			if (this.innerWidth > 576) {
				searchButtonIcon.classList.replace('bx-x', 'bx-search');
				searchForm.classList.remove('show');
			}
		})



		const switchMode = document.getElementById('switch-mode');

		switchMode.addEventListener('change', function () {
			if (this.checked) {
				document.body.classList.add('dark');
			} else {
				document.body.classList.remove('dark');
			}
		})




	</script>



	<!-- CONTENT -->
	<section id="content">
		{% if messages %}
		<div class="alert alert-success mt-3">
		{% for message in messages %}
		{{ message }}
		{% endfor %}
		</div>
		{% endif %}
		<!-- NAVBAR -->
		<nav class="text-center">
			<div>
				<h2>Furni.</h2>
			</div>
			<div class="date-container">
				<h2>{{ date }}</h2>
			</div>
		</nav>
		<!-- NAVBAR -->
	
		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Dashboard</h1>

				</div>

			</div>

			<ul class="box-info">
				<li>
					<i class='bx bxs-calendar-check'></i>
					<span class="text">
						<h3>₹{{thismonth.sum}}</h3>
						<p>This month sale</p>
						<p>{{date }}</p>
					</span>
				</li>
				<li>
					<i class='bx bxs-calendar-check'></i>
					<span class="text">
						<h3>₹{{today.sum}}</h3>
						<p>Daily sales</p>
						<p>{{ date }}</p>
					</span>
				</li>
				<li>
					<i class='bx bxs-calendar-check'></i>
					<span class="text">
						<h3>₹{{thisyear.sum}}</h3>
						<p>Yearly sales</p>
					</span>
				</li>
				<li>
					<i class='bx bxs-calendar-check'></i>
					<span class="text">
						<h3>₹{{thisweek.sum}}</h3>
						<p>weekly sales</p>
					</span>
				</li>
			</ul>

			<h2>Monthly sales</h2>
			<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

			<!-- HTML canvas to render the chart -->
			<h4 class="mt-5"> Sales report:</h4>
         <div class="container">
			<div class="row">
			
			<canvas  class="col-md-6"id="salesChart" ></canvas>
			{% comment %} <h4 class="mt-5">daily Sales for a week :</h4> {% endcomment %}
            
			<canvas class="col-md-6"  id="dailySalesChart" ></canvas>
		</div>
		</div>
			<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
			<script>
				// Get data from Django context
				var dailySalesData = {{ daily_sales_data }};
		
				// Daily Sales Chart
				var dailySalesChartCtx = document.getElementById('dailySalesChart').getContext('2d');
				var dailySalesChart = new Chart(dailySalesChartCtx, {
					type: 'line',
					data: {
						labels: ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'],
						datasets: [{
							label: 'Daily Sales',
							data: dailySalesData,
							backgroundColor: 'rgba(255, 99, 132, 0.2)',
							borderColor: 'rgba(255, 99, 132, 1)',
							borderWidth: 1
						}]
					},
					options: {
						scales: {
							y: {
								beginAtZero: true
							}
						}
					}
				});
			</script>

			<form method="POST" action="/salesreport/">
				{% csrf_token %}
			<div class="date-fields">
				<div class="date-field">
					<label for="date1">Start date:</label>
					<input type="date" id="date1" name="date1" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}">
				</div>
				<div class="date-field">
					<label for="date2">End date:</label>
					<input type="date" id="date2" name="date2" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}">
				</div>
				<button type="submit" class="btn btn-primary">Submit</button>
			</div>
		
		</form>

			<script>
				const jan = "{{ jan.sum }}"
				const feb = "{{ feb.sum }}"
				const mar = "{{ mar.sum }}"
				const apr = "{{ apr.sum }}"
				const may = "{{ may.sum }}"
				const june = "{{ june.sum }}"
				const july = "{{ july.sum }}"
				const aug = "{{ aug.sum }}"
				const sep = "{{ sep.sum }}"
				const oct = "{{ sep.sum }}"
				const nov = "{{ nov.sum }}"
				const dec = "{{ dec.sum }}"

				// Fetched sales data (replace with actual values)
				const salesData = {
					labels: ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct", "No", "Dec"],
					datasets: [{
						label: 'Monthly Sales',
						data: [jan, feb, mar, apr, may, june, july, aug, sep, oct, nov, dec],
						backgroundColor: 'rgba(54, 162, 235, 0.2)',
						borderColor: 'rgba(54, 162, 235, 1)',
						borderWidth: 1
					}]
				};

				// Get canvas element
				const ctx = document.getElementById('salesChart').getContext('2d');

				// Create chart instance
				const myChart = new Chart(ctx, {
					type: 'bar',
					data: salesData,
					options: {
						scales: {
							y: {
								beginAtZero: true
							}
						}
					}
				});
			</script>

	</section>
	


	<!-- logout modal0 -->

	<div id="logout" class="modal fade">

		<div class="modal-dialog">
			<div class="modal-content">
				<form action="/adminlogout/" method='POST'>
					{% csrf_token%}
					<div class="modal-header">
						<h4 class="modal-title">Logout</h4>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					</div>
					<div class="modal-body">
						<p>Are you sure you want to logout?</p>
					</div>
					<div class="modal-footer">
						<input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
						<button type="submit" class="btn btn-danger" value="Delete">logout</button>
					</div>

				</form>
			</div>
		</div>

	</div>



	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


</body>

</html>